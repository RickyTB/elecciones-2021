{"version":3,"sources":["data/tables.sql","enums/heatmap-type.ts","enums/table.ts","components/Map/Map.tsx","components/Layout/Layout.tsx","components/Toolbar/Toolbar.tsx","components/ColorBox/ColorBox.tsx","components/ColorGuide/ColorGuide.tsx","hooks/use-input.ts","components/DBSelect/DBSelect.tsx","utils/constants.ts","components/BoxPlotModal/BoxPlotModal.tsx","utils/helpers.ts","components/StatsSidebar/StatsSidebar.tsx","theme/styles.ts","data/elecciones_provincia.csv","data/elecciones_circunscripcion.csv","data/elecciones_canton.csv","data/elecciones_parroquia.csv","data/elecciones_zona.csv","data/elecciones_junta.csv","data/elecciones_res_presidente.csv","data/pobreza_cantones.csv","data/pobreza_parroquias.csv","bin/db.ts","heatmaps/heatmap.ts","heatmaps/poverty.ts","heatmaps/presidential-results.ts","containers/MapPage/MapPage.tsx","containers/App/App.tsx","theme/colors.ts","theme/fonts.ts","reportWebVitals.ts","index.tsx"],"names":["module","exports","HeatMapType","Table","MapEvents","onZoomChange","map","useMapEvents","zoom","event","getZoom","defaultStyle","fillOpacity","fillColor","color","weight","opacity","Map","heatMap","heatMapType","useState","setZoom","MapContainer","center","style","height","flex","GeoJSON","data","cantonesData","onEachFeature","handleCantonFeature","provinciasData","handleProvinciaFeature","Layout","children","d","flexDirection","titles","Poverty","PresidentialResults","Toolbar","onHeatMapChange","bg","useColorModeValue","as","p","justify","width","boxShadow","zIndex","size","Button","rightIcon","ChevronDown","Object","keys","key","onClick","ColorBox","title","subtitle","px","py","fontSize","ColorGuide","overflow","flexDir","justifyContent","alignItems","minW","props","index","useInput","initialValue","value","setValue","handleChange","evt","target","DBSelect","tableName","fkTable","fk","onChange","placeholder","label","isDisabled","options","useMemo","query","alasql","id","mb","fontWeight","option","nombre","PresidentMap","cand_1","cand_2","cand_3","cand_4","cand_5","cand_6","cand_7","cand_8","cand_9","cand_10","cand_11","cand_12","cand_13","cand_14","cand_15","cand_16","TableAbbrMap","0","1","2","3","4","5","TableMap","BoxPlotModal","isOpen","onClose","ids","provId","cirId","cantonId","parrId","zonaId","juntaId","results","reduceRight","prev","current","indexes","array","element","idx","indexOf","push","allIndexes","table","length","object","callback","parsed","reduce","obj","result","i","info","provincia","circunscripcion","canton","zona","junta","codigo","cand","type","y","marker","outliercolor","line","outlierwidth","name","text","boxpoints","names","arr","layout","str","colorScheme","mr","WithCir","StatsSidebar","onProvIdChange","onCirIdChange","onCantonIdChange","setCantonId","onParrIdChange","setParrId","onZonaIdChange","setZonaId","onJuntaIdChange","setJuntaId","isBoxPlotOpen","setBoxPlotOpen","useEffect","w","includes","styles","global","body","mode","Provincia","path","provinciaCsv","Circunscripcion","circunscripcionCsv","Canton","cantonCsv","Parroquia","parroquiaCsv","Zona","zonaCsv","Junta","juntaCsv","ResPresidente","resultadosCsv","PobCantones","pobCantonesCsv","PobParroquias","pobParroquiasCsv","parseData","a","Promise","res","error","Papa","download","header","dynamicTyping","complete","tablesSQL","tables","foreignKeys","filter","endsWith","foreignKey","HeatMap","provResultsCache","cantonResultsCache","feature","layer","properties","id_prov","dpa_despro","processProvincias","paintFeature","ID","DPA_DESCAN","processCantones","printSubtitle","PovertyHeatMap","poverty","bindTooltip","toFixed","Math","floor","pobParroquias","pobCantones","pobrezaList","pobreza","findPoverty","6","7","8","9","presPropMap","PresidentialResultsHeatMap","total","order","entries","sort","b","entry","join","loadResults","MapPage","setHeatMap","heatMapMap","setHeatMapMap","initDb","then","theme","extendTheme","colors","brand","50","100","200","300","400","500","600","700","800","900","fonts","heading","mono","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a46acc3d.chunk.js","sourcesContent":["module.exports = \"create table IF NOT EXISTS provincia (\\r\\n  id integer not null primary key,\\r\\n  nombre TEXT not null,\\r\\n  circunscripcion boolean not null\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS circunscripcion (\\r\\n  id integer not null primary key,\\r\\n  codigo integer not null,\\r\\n  nombre TEXT not null,\\r\\n  provinciaId integer not null,\\r\\n  FOREIGN KEY (provinciaId) REFERENCES provincia (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS canton (\\r\\n  id integer not null primary key,\\r\\n  codigo integer not null,\\r\\n  nombre TEXT not null,\\r\\n  provinciaId integer not null,\\r\\n  cirId integer,\\r\\n  FOREIGN KEY (provinciaId) REFERENCES provincia (id),\\r\\n  FOREIGN KEY (cirId) REFERENCES circunscripcion (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS parroquia (\\r\\n  id integer not null primary key,\\r\\n  codigo integer not null,\\r\\n  nombre TEXT not null,\\r\\n  cantonId integer not null,\\r\\n  FOREIGN KEY (cantonId) REFERENCES canton (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS zona (\\r\\n  id integer not null primary key,\\r\\n  codigo integer not null,\\r\\n  nombre TEXT not null,\\r\\n  parroquiaId integer not null,\\r\\n  FOREIGN KEY (parroquiaId) REFERENCES parroquia (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS junta (\\r\\n  id integer not null primary key,\\r\\n  codigo integer not null,\\r\\n  nombre TEXT not null,\\r\\n  zonaId integer not null,\\r\\n  FOREIGN KEY (zonaId) REFERENCES zona (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS res_presidente (\\r\\n  id integer not null primary key,\\r\\n  cand_1 integer not null,\\r\\n  cand_2 integer not null,\\r\\n  cand_3 integer not null,\\r\\n  cand_4 integer not null,\\r\\n  cand_5 integer not null,\\r\\n  cand_6 integer not null,\\r\\n  cand_7 integer not null,\\r\\n  cand_8 integer not null,\\r\\n  cand_9 integer not null,\\r\\n  cand_10 integer not null,\\r\\n  cand_11 integer not null,\\r\\n  cand_12 integer not null,\\r\\n  cand_13 integer not null,\\r\\n  cand_14 integer not null,\\r\\n  cand_15 integer not null,\\r\\n  cand_16 integer not null,\\r\\n  total_suf integer not null,\\r\\n  blanco integer not null,\\r\\n  nulo integer not null,\\r\\n  juntaId integer not null,\\r\\n  FOREIGN KEY (juntaId) REFERENCES junta (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS pob_cantones (\\r\\n  codigo integer not null primary key,\\r\\n  nombre TEXT not null,\\r\\n  no_pobres integer not null,\\r\\n  pobres integer not null,\\r\\n  total integer not null,\\r\\n  cantonId integer not null,\\r\\n  FOREIGN KEY (cantonId) REFERENCES canton (id)\\r\\n);\\r\\n\\r\\ncreate table IF NOT EXISTS pob_parroquias (\\r\\n  codigo integer not null primary key,\\r\\n  nombre TEXT not null,\\r\\n  no_pobres integer not null,\\r\\n  pobres integer not null,\\r\\n  total integer not null,\\r\\n  parroquiaId integer not null,\\r\\n  FOREIGN KEY (parroquiaId) REFERENCES parroquia (id)\\r\\n);\"","export enum HeatMapType {\r\n  Poverty = \"poverty\",\r\n  PresidentialResults = \"pres-results\",\r\n}\r\n","export enum Table {\r\n  Provincia = \"provincia\",\r\n  Circunscripcion = \"circunscripcion\",\r\n  Canton = \"canton\",\r\n  Parroquia = \"parroquia\",\r\n  Zona = \"zona\",\r\n  Junta = \"junta\",\r\n  ResPresidente = \"res_presidente\",\r\n  PobCantones = \"pob_cantones\",\r\n  PobParroquias = \"pob_parroquias\",\r\n}\r\n","import { MapContainer, GeoJSON, useMapEvents } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport * as cantonesData from \"../../data/ecuador_cantones.json\";\r\nimport * as provinciasData from \"../../data/ecuador_provincias.json\";\r\nimport { useState } from \"react\";\r\nimport \"./Map.css\";\r\nimport { HeatMap } from \"../../heatmaps\";\r\nimport { HeatMapType } from \"../../enums\";\r\n\r\nexport interface MapProps {\r\n  heatMap: HeatMap;\r\n  heatMapType: HeatMapType;\r\n}\r\n\r\ninterface MapEventsProps {\r\n  onZoomChange: (zoom: number) => void;\r\n}\r\n\r\nconst MapEvents: React.FC<MapEventsProps> = ({ onZoomChange }) => {\r\n  const map = useMapEvents({\r\n    zoom(event) {\r\n      onZoomChange(map.getZoom());\r\n    },\r\n  });\r\n  return null;\r\n};\r\n\r\nconst defaultStyle = {\r\n  fillOpacity: 1,\r\n  fillColor: \"#fff\",\r\n  color: \"black\",\r\n  weight: 2,\r\n  opacity: 0.6,\r\n};\r\n\r\nconst Map: React.FC<MapProps> = ({ heatMap, heatMapType }) => {\r\n  const [zoom, setZoom] = useState(6);\r\n  return (\r\n    <MapContainer\r\n      center={[-2.778, -83.54]}\r\n      zoom={zoom}\r\n      style={{ height: \"100%\", flex: 1, }}\r\n    >\r\n      {zoom > 8 ? (\r\n        <GeoJSON\r\n          data={cantonesData.features as any}\r\n          key={`${heatMapType}-cantones`}\r\n          onEachFeature={heatMap.handleCantonFeature}\r\n          style={defaultStyle}\r\n        />\r\n      ) : (\r\n        <GeoJSON\r\n          data={provinciasData.features as any}\r\n          key={`${heatMapType}-provincias`}\r\n          onEachFeature={heatMap.handleProvinciaFeature}\r\n          style={defaultStyle}\r\n        />\r\n      )}\r\n      <MapEvents onZoomChange={setZoom} />\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React from \"react\";\r\nimport { Toolbar } from \"../Toolbar\";\r\nimport { Box } from \"@chakra-ui/react\";\r\n\r\nexport interface LayoutProps {}\r\n\r\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\r\n  return (\r\n    <Box d=\"flex\" flexDirection=\"column\" height=\"100vh\">\r\n      {/*<Toolbar heatMapType={heatMap} onHeatMapChange={setHeatMap} />*/}\r\n      {children}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import { ChevronDownIcon } from \"@chakra-ui/icons\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Flex,\r\n  Heading,\r\n  Menu,\r\n  MenuButton,\r\n  MenuItem,\r\n  MenuList,\r\n  useColorModeValue,\r\n} from \"@chakra-ui/react\";\r\nimport React from \"react\";\r\nimport { HeatMapType } from \"../../enums\";\r\n\r\nexport interface ToolbarProps {\r\n  className?: string;\r\n  heatMapType: HeatMapType;\r\n  onHeatMapChange: (type: HeatMapType) => void;\r\n}\r\n\r\nconst titles: Record<HeatMapType, string> = {\r\n  [HeatMapType.Poverty]: \"Pobreza\",\r\n  [HeatMapType.PresidentialResults]: \"Resultados presidenciales\",\r\n};\r\n\r\nconst Toolbar: React.FC<ToolbarProps> = ({ heatMapType, onHeatMapChange }) => {\r\n  const bg = useColorModeValue(\"brand.600\", \"brand.300\");\r\n  const color = useColorModeValue(\"white\", \"gray.800\");\r\n  return (\r\n    <Flex\r\n      as=\"nav\"\r\n      p={2}\r\n      justify=\"space-between\"\r\n      bg={bg}\r\n      width=\"full\"\r\n      boxShadow=\"sm\"\r\n      zIndex=\"sticky\"\r\n    >\r\n      <Box p=\"2\">\r\n        <Heading size=\"md\" color={color}>\r\n          Elecciones 2021\r\n        </Heading>\r\n      </Box>\r\n      <Box>\r\n        <Menu>\r\n          <MenuButton as={Button} rightIcon={<ChevronDownIcon />}>\r\n            {titles[heatMapType]}\r\n          </MenuButton>\r\n          <MenuList>\r\n            {(Object.keys(titles) as HeatMapType[]).map((key) => (\r\n              <MenuItem key={key} onClick={() => onHeatMapChange(key)}>\r\n                {titles[key]}\r\n              </MenuItem>\r\n            ))}\r\n          </MenuList>\r\n        </Menu>\r\n      </Box>\r\n    </Flex>\r\n  );\r\n};\r\n\r\nexport default Toolbar;\r\n","import { Box, Heading, Text } from \"@chakra-ui/react\";\r\n\r\nexport interface ColorBoxProps {\r\n  title: string;\r\n  subtitle: string;\r\n  bg: string;\r\n  color: string;\r\n}\r\n\r\nconst ColorBox: React.FC<ColorBoxProps> = ({ title, subtitle, bg, color }) => {\r\n  return (\r\n    <Box bg={bg} color={color} flex=\"1\" px={3} py={2}>\r\n      <Heading as=\"h3\" size=\"sm\">\r\n        {title}\r\n      </Heading>\r\n      <Text fontSize=\"sm\">{subtitle}</Text>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ColorBox;\r\n","import { Box, Flex } from \"@chakra-ui/react\";\r\nimport { ColorBox } from \"../ColorBox\";\r\nimport { HeatMap } from \"../../heatmaps\";\r\nimport React from \"react\";\r\n\r\nexport interface ColorGuideProps {\r\n  heatMap: HeatMap;\r\n}\r\n\r\nconst ColorGuide: React.FC<ColorGuideProps> = ({ heatMap }) => (\r\n  <Box width=\"full\" zIndex=\"banner\" boxShadow=\"base\" overflow=\"auto\">\r\n    <Flex\r\n      flexDir=\"row\"\r\n      justifyContent=\"space-evenly\"\r\n      alignItems=\"stretch\"\r\n      minW=\"1080px\"\r\n      width=\"100%\"\r\n    >\r\n      {heatMap.props.map((props, index) => (\r\n        <ColorBox {...props} key={index} />\r\n      ))}\r\n    </Flex>\r\n  </Box>\r\n);\r\n\r\nexport default ColorGuide;\r\n","import { useState } from \"react\";\r\n\r\nexport const useInput = (\r\n  initialValue: string = \"\"\r\n): [\r\n  string,\r\n  React.ChangeEventHandler,\r\n  React.Dispatch<React.SetStateAction<string>>\r\n] => {\r\n  const [value, setValue] = useState(initialValue);\r\n  const handleChange = (evt: any) => setValue(evt.target.value);\r\n  return [value, handleChange, setValue];\r\n};\r\n","import { FormControl, FormLabel, Select } from \"@chakra-ui/react\";\r\nimport { useMemo } from \"react\";\r\nimport alasql from \"alasql\";\r\nimport { capitalizeFirstLetter } from \"../../utils/helpers\";\r\n\r\nexport interface DBSelectProps {\r\n  tableName: string;\r\n  fk?: number | string;\r\n  fkTable?: string;\r\n  value: string;\r\n  onChange: React.ChangeEventHandler<HTMLSelectElement>;\r\n  placeholder?: string;\r\n  label: string;\r\n  isDisabled?: boolean;\r\n}\r\n\r\nconst DBSelect: React.FC<DBSelectProps> = ({\r\n  tableName,\r\n  fkTable,\r\n  fk,\r\n  value,\r\n  onChange,\r\n  placeholder = \"Todas\",\r\n  label,\r\n  isDisabled = false,\r\n}) => {\r\n  const options = useMemo(() => {\r\n    if (isDisabled) return [];\r\n    const query = `SELECT ${tableName}.id, ${tableName}.nombre FROM ${tableName} ${\r\n      fk\r\n        ? `JOIN ${fkTable} ON ${tableName}.${fkTable}Id = ${fkTable}.id WHERE ${fkTable}.id = ${fk}`\r\n        : \"\"\r\n    }`;\r\n    return alasql(query);\r\n  }, [isDisabled, fk]);\r\n\r\n  return (\r\n    <FormControl id={`form-${tableName}`} mb={4} isDisabled={isDisabled}>\r\n      <FormLabel fontWeight=\"bold\">{label}</FormLabel>\r\n      <Select placeholder={placeholder} onChange={onChange} value={value}>\r\n        {options.map((option: any) => (\r\n          <option value={option.id} key={option.id}>\r\n            {option.nombre}\r\n          </option>\r\n        ))}\r\n      </Select>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default DBSelect;\r\n","export const PresidentMap: Record<string, string> = {\r\n  cand_1: \"ANDRES ARAUZ GALARZA\",\r\n  cand_2: \"LUCIO GUTIERREZ\",\r\n  cand_3: \"GERSON ALMEIDA\",\r\n  cand_4: \"ISIDRO PERFECTO ROMERO CARBO\",\r\n  cand_5: \"CARLOS SAGNAY DE LA BASTIDA\",\r\n  cand_6: \"XAVIER HERVAS\",\r\n  cand_7: \"PEDRO JOSE FREILE\",\r\n  cand_8: \"CESAR MONTUFAR\",\r\n  cand_9: \"YAKU PEREZ\",\r\n  cand_10: \"GIOVANNY ANDRADE SALVADOR\",\r\n  cand_11: \"GUSTAVO LARREA CABRERA\",\r\n  cand_12: \"GUILLERMO LASSO MENDOZA\",\r\n  cand_13: \"GUILLERMO CELI\",\r\n  cand_14: \"JUAN FERNANDO VELASCO TORRES\",\r\n  cand_15: \"PAUL ERNESTO CARRASCO\",\r\n  cand_16: \"XIMENA PEÑA PACHECO\",\r\n};\r\n","import {\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalCloseButton,\r\n  ModalBody,\r\n  ModalFooter,\r\n  Button,\r\n} from \"@chakra-ui/react\";\r\nimport React from \"react\";\r\nimport Plot from \"react-plotly.js\";\r\nimport { useMemo } from \"react\";\r\nimport alasql from \"alasql\";\r\nimport { mapObject, allIndexes } from \"../../utils/helpers\";\r\nimport { PresidentMap } from \"../../utils/constants\";\r\n\r\nexport interface BoxPlotModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  ids: string[];\r\n}\r\n\r\ninterface JuntaResult {\r\n  cand_1: number;\r\n  cand_2: number;\r\n  cand_3: number;\r\n  cand_4: number;\r\n  cand_5: number;\r\n  cand_6: number;\r\n  cand_7: number;\r\n  cand_8: number;\r\n  cand_9: number;\r\n  cand_10: number;\r\n  cand_11: number;\r\n  cand_12: number;\r\n  cand_13: number;\r\n  cand_14: number;\r\n  cand_15: number;\r\n  cand_16: number;\r\n  blanco: number;\r\n  nulo: number;\r\n  total_suf: number;\r\n  codigo: number;\r\n  junta: string;\r\n  zona: string;\r\n  zona_id: string;\r\n  parroquia: string;\r\n  canton: string;\r\n  circunscripcion: string;\r\n  provincia: string;\r\n}\r\n\r\ninterface CandResult {\r\n  results: number[];\r\n  info: string[];\r\n}\r\ntype ParsedResult = {\r\n  cand_1: CandResult;\r\n  cand_2: CandResult;\r\n  cand_3: CandResult;\r\n  cand_4: CandResult;\r\n  cand_5: CandResult;\r\n  cand_6: CandResult;\r\n  cand_7: CandResult;\r\n  cand_8: CandResult;\r\n  cand_9: CandResult;\r\n  cand_10: CandResult;\r\n  cand_11: CandResult;\r\n  cand_12: CandResult;\r\n  cand_13: CandResult;\r\n  cand_14: CandResult;\r\n  cand_15: CandResult;\r\n  cand_16: CandResult;\r\n};\r\n\r\nconst TableAbbrMap = {\r\n  0: \"pr\",\r\n  1: \"cr\",\r\n  2: \"c\",\r\n  3: \"p\",\r\n  4: \"z\",\r\n  5: \"j\",\r\n};\r\n\r\nconst TableMap: Record<number, string> = {\r\n  0: \"provincia\",\r\n  1: \"circunscripcion\",\r\n  2: \"canton\",\r\n  3: \"parroquia\",\r\n  4: \"zona\",\r\n  5: \"junta\",\r\n};\r\n\r\nconst BoxPlotModal: React.FC<BoxPlotModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  ids,\r\n}) => {\r\n  const [provId, cirId, cantonId, parrId, zonaId, juntaId] = ids;\r\n\r\n  const results = useMemo(() => {\r\n    const id = ids.reduceRight((prev, current) => prev || current);\r\n    const indexes = allIndexes(ids, id);\r\n    //@ts-ignore\r\n    const table = TableAbbrMap[indexes[indexes.length - 1]];\r\n    return alasql(`\r\n    SELECT cand_1,\r\n    cand_2,\r\n    cand_3,\r\n    cand_4,\r\n    cand_5,\r\n    cand_6,\r\n    cand_7,\r\n    cand_8,\r\n    cand_9,\r\n    cand_10,\r\n    cand_11,\r\n    cand_12,\r\n    cand_13,\r\n    cand_14,\r\n    cand_15,\r\n    cand_16,\r\n    blanco,\r\n    nulo,\r\n    total_suf,\r\n    j.codigo       codigo,\r\n    j.nombre       junta,\r\n    TRIM(z.nombre) zona,\r\n    z.id           zona_id,\r\n    p.nombre       parroquia,\r\n    c.nombre       canton,\r\n    cr.nombre      circunscripcion,\r\n    pr.nombre      provincia\r\nFROM res_presidente\r\n      JOIN junta j ON res_presidente.juntaId = j.id\r\n      JOIN zona z ON j.zonaId = z.id\r\n      JOIN parroquia p ON z.parroquiaId = p.id\r\n      JOIN canton c ON p.cantonId = c.id\r\n      LEFT JOIN circunscripcion cr ON c.cirId = cr.id\r\n      JOIN provincia pr ON c.provinciaId = pr.id\r\nWHERE ${table}.id = ${id}\r\nORDER BY res_presidente.juntaId\r\n`) as JuntaResult[];\r\n  }, [provId, cirId, cantonId, parrId, zonaId, juntaId]);\r\n\r\n  const data = useMemo(() => {\r\n    const parsed = results.reduce<ParsedResult>(\r\n      (obj, result) => {\r\n        for (let i = 1; i <= 16; i++) {\r\n          //@ts-ignore\r\n          obj[`cand_${i}`].results.push(result[`cand_${i}`]);\r\n          //@ts-ignore\r\n          obj[`cand_${i}`].info.push([\r\n            \"Provincia: \" + result.provincia,\r\n            \"Circunscripción: \" + (result.circunscripcion || \"N/A\"),\r\n            \"Cantón: \" + result.canton,\r\n            \"Zona: \" + result.zona,\r\n            \"Junta: \" + result.junta,\r\n            \"Código: \" + result.codigo,\r\n          ]);\r\n        }\r\n        return obj;\r\n      },\r\n      {\r\n        cand_1: { results: [], info: [] },\r\n        cand_2: { results: [], info: [] },\r\n        cand_3: { results: [], info: [] },\r\n        cand_4: { results: [], info: [] },\r\n        cand_5: { results: [], info: [] },\r\n        cand_6: { results: [], info: [] },\r\n        cand_7: { results: [], info: [] },\r\n        cand_8: { results: [], info: [] },\r\n        cand_9: { results: [], info: [] },\r\n        cand_10: { results: [], info: [] },\r\n        cand_11: { results: [], info: [] },\r\n        cand_12: { results: [], info: [] },\r\n        cand_13: { results: [], info: [] },\r\n        cand_14: { results: [], info: [] },\r\n        cand_15: { results: [], info: [] },\r\n        cand_16: { results: [], info: [] },\r\n      }\r\n    );\r\n    return mapObject(parsed, (cand, key) => ({\r\n      type: \"box\",\r\n      y: cand.results,\r\n      marker: {\r\n        color: \"rgb(8,81,156)\",\r\n        outliercolor: \"rgba(219, 64, 82, 0.6)\",\r\n        line: {\r\n          outliercolor: \"rgba(219, 64, 82, 1.0)\",\r\n          outlierwidth: 2,\r\n        },\r\n      },\r\n      name: PresidentMap[key],\r\n      text: cand.info,\r\n      boxpoints: \"suspectedoutliers\",\r\n    })) as any;\r\n  }, [results]);\r\n\r\n  const names = useMemo(() => {\r\n    return ids.reduce<string[]>(\r\n      (arr, id, index) => [\r\n        ...arr,\r\n        id\r\n          ? alasql(`SELECT nombre FROM ${TableMap[index]} WHERE id = ${id}`)[0]\r\n              .nombre\r\n          : null,\r\n      ],\r\n      []\r\n    );\r\n  }, [provId, cirId, cantonId, parrId, zonaId, juntaId]);\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} size=\"full\">\r\n      <ModalOverlay />\r\n      <ModalContent>\r\n        <ModalHeader>\r\n          Diagrama de Caja: Resultados Presidenciales Ecuador 2021\r\n        </ModalHeader>\r\n        <ModalCloseButton />\r\n        <ModalBody d=\"flex\">\r\n          <Plot\r\n            data={data}\r\n            layout={{\r\n              title: names.reduce(\r\n                (str, name) => `${str} -> ${name ? name : \"N/A\"}`,\r\n                \"JUNTA \"\r\n              ),\r\n            }}\r\n            style={{ flex: 1 }}\r\n          />\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <Button colorScheme=\"red\" mr={3} onClick={onClose}>\r\n            Cerrar\r\n          </Button>\r\n        </ModalFooter>\r\n      </ModalContent>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BoxPlotModal;\r\n","type ObjectKey = string | number;\r\n\r\nexport const mapObject = <T, U>(\r\n  object: Record<ObjectKey, T>,\r\n  callback: (value: T, key: ObjectKey) => U\r\n): U[] => {\r\n  return Object.keys(object).map((key) => callback(object[key], key));\r\n};\r\n\r\nexport function capitalizeFirstLetter(string: string): string {\r\n  return string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n\r\nexport function allIndexes<T>(array: T[], element: T): number[] {\r\n  let indexes = [];\r\n  let idx = array.indexOf(element);\r\n  while (idx != -1) {\r\n    indexes.push(idx);\r\n    idx = array.indexOf(element, idx + 1);\r\n  }\r\n  return indexes;\r\n}\r\n","import { Box, Button, Heading } from \"@chakra-ui/react\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useInput } from \"../../hooks/use-input\";\r\nimport { DBSelect } from \"../DBSelect\";\r\nimport { useState } from \"react\";\r\nimport { BoxPlotModal } from \"../BoxPlotModal\";\r\n\r\nexport interface StatsSidebarProps {}\r\n\r\nconst WithCir = [\"9\", \"13\", \"17\"];\r\n\r\nconst StatsSidebar: React.FC<StatsSidebarProps> = () => {\r\n  const [provId, onProvIdChange, setProvId] = useInput();\r\n  const [cirId, onCirIdChange] = useInput();\r\n  const [cantonId, onCantonIdChange, setCantonId] = useInput();\r\n  const [parrId, onParrIdChange, setParrId] = useInput();\r\n  const [zonaId, onZonaIdChange, setZonaId] = useInput();\r\n  const [juntaId, onJuntaIdChange, setJuntaId] = useInput();\r\n\r\n  const [isBoxPlotOpen, setBoxPlotOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setCantonId(\"\");\r\n    setParrId(\"\");\r\n    setZonaId(\"\");\r\n    setJuntaId(\"\");\r\n  }, [cirId, provId]);\r\n\r\n  useEffect(() => {\r\n    setParrId(\"\");\r\n    setZonaId(\"\");\r\n    setJuntaId(\"\");\r\n  }, [cantonId]);\r\n\r\n  useEffect(() => {\r\n    setZonaId(\"\");\r\n    setJuntaId(\"\");\r\n  }, [parrId]);\r\n\r\n  return (\r\n    <Box bg=\"white\" w=\"md\" boxShadow=\"base\" p={4}>\r\n      <Heading size=\"lg\" mb={4}>\r\n        Detalles\r\n      </Heading>\r\n\r\n      <DBSelect\r\n        tableName=\"provincia\"\r\n        value={provId}\r\n        onChange={onProvIdChange}\r\n        placeholder=\"Seleccione una provincia\"\r\n        label=\"Provincia\"\r\n      />\r\n\r\n      {WithCir.includes(provId) && (\r\n        <DBSelect\r\n          tableName=\"circunscripcion\"\r\n          value={cirId}\r\n          onChange={onCirIdChange}\r\n          placeholder=\"Seleccione una circunscripción\"\r\n          label=\"Circunscripción\"\r\n          fkTable=\"provincia\"\r\n          fk={provId}\r\n        />\r\n      )}\r\n\r\n      <DBSelect\r\n        tableName=\"canton\"\r\n        value={cantonId}\r\n        onChange={onCantonIdChange}\r\n        placeholder=\"Seleccione un cantón\"\r\n        label=\"Cantón\"\r\n        fkTable=\"provincia\"\r\n        fk={provId}\r\n        isDisabled={!provId}\r\n      />\r\n\r\n      <DBSelect\r\n        tableName=\"parroquia\"\r\n        value={parrId}\r\n        onChange={onParrIdChange}\r\n        label=\"Parroquia\"\r\n        fkTable=\"canton\"\r\n        fk={cantonId}\r\n        isDisabled={!cantonId}\r\n      />\r\n\r\n      <DBSelect\r\n        tableName=\"zona\"\r\n        value={zonaId}\r\n        onChange={onZonaIdChange}\r\n        label=\"Zona\"\r\n        fkTable=\"parroquia\"\r\n        fk={parrId}\r\n        isDisabled={!parrId}\r\n      />\r\n\r\n      <DBSelect\r\n        tableName=\"junta\"\r\n        value={juntaId}\r\n        onChange={onJuntaIdChange}\r\n        label=\"Junta\"\r\n        fkTable=\"zona\"\r\n        fk={zonaId}\r\n        isDisabled={!zonaId}\r\n      />\r\n\r\n      <Button\r\n        colorScheme=\"brand\"\r\n        onClick={() => setBoxPlotOpen(true)}\r\n        isDisabled={!parrId}\r\n      >\r\n        Graficar resultados\r\n      </Button>\r\n\r\n      {isBoxPlotOpen && (\r\n        <BoxPlotModal\r\n          ids={[provId, cirId, cantonId, parrId, zonaId, juntaId]}\r\n          isOpen={isBoxPlotOpen}\r\n          onClose={() => setBoxPlotOpen(false)}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default StatsSidebar;\r\n","import { mode } from \"@chakra-ui/theme-tools\";\r\n\r\nexport const styles = {\r\n  global: (props: any) => ({\r\n    body: {\r\n      bg: mode(\"gray.100\", \"gray.800\")(props),\r\n    },\r\n  }),\r\n};\r\n","export default __webpack_public_path__ + \"static/media/elecciones_provincia.b1b18fef.csv\";","export default __webpack_public_path__ + \"static/media/elecciones_circunscripcion.c6258590.csv\";","export default __webpack_public_path__ + \"static/media/elecciones_canton.c922d201.csv\";","export default __webpack_public_path__ + \"static/media/elecciones_parroquia.70665e28.csv\";","export default __webpack_public_path__ + \"static/media/elecciones_zona.208935dd.csv\";","export default __webpack_public_path__ + \"static/media/elecciones_junta.a0565549.csv\";","export default __webpack_public_path__ + \"static/media/elecciones_res_presidente.30a777ff.csv\";","export default __webpack_public_path__ + \"static/media/pobreza_cantones.391a527d.csv\";","export default __webpack_public_path__ + \"static/media/pobreza_parroquias.ca411e9e.csv\";","import * as Papa from \"papaparse\";\r\nimport provinciaCsv from \"../data/elecciones_provincia.csv\";\r\nimport circunscripcionCsv from \"../data/elecciones_circunscripcion.csv\";\r\nimport cantonCsv from \"../data/elecciones_canton.csv\";\r\nimport parroquiaCsv from \"../data/elecciones_parroquia.csv\";\r\nimport zonaCsv from \"../data/elecciones_zona.csv\";\r\nimport juntaCsv from \"../data/elecciones_junta.csv\";\r\nimport resultadosCsv from \"../data/elecciones_res_presidente.csv\";\r\nimport pobCantonesCsv from \"../data/pobreza_cantones.csv\";\r\nimport pobParroquiasCsv from \"../data/pobreza_parroquias.csv\";\r\nimport { Table } from \"../enums\";\r\nimport alasql from \"alasql\";\r\nimport tablesSQL from \"../data/tables.sql\";\r\n\r\ninterface TableData {\r\n  table: Table;\r\n  path: string;\r\n}\r\n\r\nconst data: TableData[] = [\r\n  {\r\n    table: Table.Provincia,\r\n    path: provinciaCsv,\r\n  },\r\n  {\r\n    table: Table.Circunscripcion,\r\n    path: circunscripcionCsv,\r\n  },\r\n  {\r\n    table: Table.Canton,\r\n    path: cantonCsv,\r\n  },\r\n  {\r\n    table: Table.Parroquia,\r\n    path: parroquiaCsv,\r\n  },\r\n  {\r\n    table: Table.Zona,\r\n    path: zonaCsv,\r\n  },\r\n  {\r\n    table: Table.Junta,\r\n    path: juntaCsv,\r\n  },\r\n  {\r\n    table: Table.ResPresidente,\r\n    path: resultadosCsv,\r\n  },\r\n  {\r\n    table: Table.PobCantones,\r\n    path: pobCantonesCsv,\r\n  },\r\n  {\r\n    table: Table.PobParroquias,\r\n    path: pobParroquiasCsv,\r\n  },\r\n];\r\n\r\nasync function parseData(data: TableData): Promise<any[]> {\r\n  return new Promise((res, error) => {\r\n    Papa.parse(data.path, {\r\n      download: true,\r\n      header: true,\r\n      dynamicTyping: true,\r\n      complete: function (results) {\r\n        res(results.data);\r\n      },\r\n      error,\r\n    });\r\n  });\r\n}\r\n\r\nexport async function initDb() {\r\n  alasql(tablesSQL);\r\n\r\n  for (const table of data) {\r\n    (alasql as any).tables[table.table].data = await parseData(table);\r\n    alasql(`CREATE INDEX ${table.table}_id ON ${table.table} (id)`);\r\n    alasql(`REINDEX ${table.table}_id`);\r\n\r\n    const obj = (alasql as any).tables[table.table].data[0];\r\n    const foreignKeys = Object.keys(obj).filter((key) => key.endsWith(\"Id\"));\r\n    for (const foreignKey of foreignKeys) {\r\n      alasql(\r\n        `CREATE INDEX ${table.table}_${foreignKey} ON ${table.table} (${foreignKey})`\r\n      );\r\n      alasql(`REINDEX ${table.table}_${foreignKey}`);\r\n    }\r\n  }\r\n}\r\n","import * as geojson from \"geojson\";\r\nimport { Layer } from \"leaflet\";\r\nimport { ColorBoxProps } from \"../components/ColorBox/ColorBox\";\r\n\r\nexport abstract class HeatMap<T = any> {\r\n  abstract readonly props: ColorBoxProps[];\r\n\r\n  private provResultsCache: Record<number, T> = {};\r\n  private cantonResultsCache: Record<number, T> = {};\r\n\r\n  handleProvinciaFeature = (\r\n    feature: geojson.Feature<geojson.GeometryObject>,\r\n    layer: Layer\r\n  ) => {\r\n    const id = feature.properties?.id_prov;\r\n    if (id === 25) return;\r\n\r\n    const name = feature.properties?.dpa_despro;\r\n\r\n    const result = this.provResultsCache[id] || this.processProvincias(id);\r\n    this.provResultsCache[id] = result;\r\n\r\n    this.paintFeature(layer, name, result);\r\n  };\r\n\r\n  handleCantonFeature = (\r\n    feature: geojson.Feature<geojson.GeometryObject>,\r\n    layer: Layer\r\n  ) => {\r\n    const id = feature.properties?.ID;\r\n    const name = feature.properties?.DPA_DESCAN;\r\n\r\n    const result = this.cantonResultsCache[id] || this.processCantones(id);\r\n    this.cantonResultsCache[id] = result;\r\n\r\n    this.paintFeature(layer, name, result);\r\n  };\r\n\r\n  protected abstract paintFeature: (\r\n    layer: Layer,\r\n    name: string,\r\n    result: T\r\n  ) => void;\r\n\r\n  protected abstract processProvincias: (id: number) => T;\r\n\r\n  protected abstract processCantones: (id: number) => T;\r\n}\r\n","import alasql from \"alasql\";\r\nimport { Layer } from \"leaflet\";\r\nimport { ColorBoxProps } from \"../components/ColorBox/ColorBox\";\r\nimport { HeatMap } from \"./heatmap\";\r\n\r\nconst printSubtitle = (value: number) =>\r\n  `${value} provincia${value === 1 ? \"\" : \"s\"}`;\r\n\r\nexport class PovertyHeatMap extends HeatMap<number> {\r\n  readonly props: ColorBoxProps[];\r\n\r\n  constructor() {\r\n    super();\r\n    const poverty = this.findPoverty();\r\n    this.props = [\r\n      {\r\n        title: \"0% - 10%\",\r\n        bg: \"#ffe2f1\",\r\n        color: \"black\",\r\n        subtitle: printSubtitle(poverty[0]),\r\n      },\r\n      {\r\n        title: \"10% - 20%\",\r\n        bg: \"#ffb3cf\",\r\n        color: \"black\",\r\n        subtitle: printSubtitle(poverty[1]),\r\n      },\r\n      {\r\n        title: \"20% - 30%\",\r\n        bg: \"#fc83ab\",\r\n        color: \"black\",\r\n        subtitle: printSubtitle(poverty[2]),\r\n      },\r\n      {\r\n        title: \"30% - 40%\",\r\n        bg: \"#f95283\",\r\n        color: \"black\",\r\n        subtitle: printSubtitle(poverty[3]),\r\n      },\r\n      {\r\n        title: \"40% - 50%\",\r\n        bg: \"#f62259\",\r\n        color: \"white\",\r\n        subtitle: printSubtitle(poverty[4]),\r\n      },\r\n      {\r\n        title: \"50% - 60%\",\r\n        bg: \"#dd0939\",\r\n        color: \"white\",\r\n        subtitle: printSubtitle(poverty[5]),\r\n      },\r\n      {\r\n        title: \"60% - 70%\",\r\n        bg: \"#ad0337\",\r\n        color: \"white\",\r\n        subtitle: printSubtitle(poverty[6]),\r\n      },\r\n      {\r\n        title: \"70% - 80%\",\r\n        bg: \"#7c002f\",\r\n        color: \"white\",\r\n        subtitle: printSubtitle(poverty[7]),\r\n      },\r\n      {\r\n        title: \"80% - 90%\",\r\n        bg: \"#4d0021\",\r\n        color: \"white\",\r\n        subtitle: printSubtitle(poverty[8]),\r\n      },\r\n      {\r\n        title: \"90% - 100%\",\r\n        bg: \"#20000d\",\r\n        color: \"white\",\r\n        subtitle: printSubtitle(poverty[9]),\r\n      },\r\n    ];\r\n  }\r\n\r\n  findPoverty() {\r\n    const pobParroquias = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, provinciaId\r\n      FROM provincia \r\n        JOIN canton ON canton.provinciaId = provincia.id\r\n        JOIN parroquia ON parroquia.cantonId = canton.id\r\n        JOIN pob_parroquias ON pob_parroquias.parroquiaId = parroquia.id\r\n      GROUP BY provinciaId;\r\n    `\r\n    );\r\n\r\n    const pobCantones = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, provinciaId\r\n      FROM provincia \r\n        JOIN canton ON canton.provinciaId = provincia.id\r\n        JOIN pob_cantones ON pob_cantones.cantonId = canton.id\r\n      GROUP BY provinciaId;\r\n    `\r\n    );\r\n\r\n    const pobrezaList = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, provinciaId\r\n      FROM ?\r\n      GROUP BY provinciaId;\r\n    `,\r\n      [[...pobParroquias, ...pobCantones]]\r\n    );\r\n\r\n    const resultado = alasql(\r\n      `\r\n      SELECT (pobres / total) pobreza FROM (\r\n        SELECT SUM(pobres) pobres, SUM(total) total\r\n        FROM ?\r\n        GROUP BY provinciaId\r\n      );\r\n    `,\r\n      [pobrezaList]\r\n    ) as any[];\r\n\r\n    return resultado.reduce(\r\n      (obj, { pobreza }) => {\r\n        obj[Math.floor(pobreza * 10)] += 1;\r\n        return obj;\r\n      },\r\n      {\r\n        0: 0,\r\n        1: 0,\r\n        2: 0,\r\n        3: 0,\r\n        4: 0,\r\n        5: 0,\r\n        6: 0,\r\n        7: 0,\r\n        8: 0,\r\n        9: 0,\r\n      }\r\n    );\r\n  }\r\n\r\n  protected paintFeature = (layer: Layer, name: string, poverty: number) => {\r\n    layer.bindTooltip(`\r\n      <h4><strong>${name}</strong></h4>\r\n      <p>Nivel de pobreza: ${(poverty * 100).toFixed(2)}%</p>\r\n    `);\r\n\r\n    (layer as any).options.fillColor = this.props[Math.floor(poverty * 10)].bg;\r\n  };\r\n\r\n  protected processProvincias = (id: number) => {\r\n    const pobParroquias = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, provinciaId\r\n      FROM provincia \r\n        JOIN canton ON canton.provinciaId = provincia.id\r\n        JOIN parroquia ON parroquia.cantonId = canton.id\r\n        JOIN pob_parroquias ON pob_parroquias.parroquiaId = parroquia.id\r\n      WHERE provincia.id = ${id}\r\n      GROUP BY provinciaId;\r\n    `\r\n    );\r\n\r\n    const pobCantones = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, provinciaId\r\n      FROM provincia \r\n        JOIN canton ON canton.provinciaId = provincia.id\r\n        JOIN pob_cantones ON pob_cantones.cantonId = canton.id\r\n      WHERE provincia.id = ${id}\r\n      GROUP BY provinciaId;\r\n    `\r\n    );\r\n\r\n    const pobrezaList = [...pobParroquias, ...pobCantones];\r\n    const [{ pobreza }] = alasql(\r\n      `\r\n      SELECT (pobres / total) pobreza FROM (\r\n        SELECT SUM(pobres) pobres, SUM(total) total\r\n        FROM ?\r\n      );\r\n    `,\r\n      [pobrezaList]\r\n    );\r\n\r\n    return pobreza;\r\n  };\r\n\r\n  processCantones = (id: number) => {\r\n    const pobParroquias = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, cantonId\r\n      FROM canton \r\n        JOIN parroquia ON parroquia.cantonId = canton.id\r\n        JOIN pob_parroquias ON pob_parroquias.parroquiaId = parroquia.id\r\n      WHERE canton.id = ${id}\r\n      GROUP BY cantonId;\r\n    `\r\n    );\r\n\r\n    const pobCantones = alasql(\r\n      `\r\n      SELECT SUM(pobres) pobres, SUM(total) total, cantonId\r\n      FROM canton\r\n        JOIN pob_cantones ON pob_cantones.cantonId = canton.id\r\n      WHERE canton.id = ${id}\r\n      GROUP BY cantonId;\r\n    `\r\n    );\r\n\r\n    const pobrezaList = [...pobParroquias, ...pobCantones];\r\n    const [{ pobreza }] = alasql(\r\n      `\r\n      SELECT (pobres / total) pobreza FROM (\r\n        SELECT SUM(pobres) pobres, SUM(total) total\r\n        FROM ?\r\n      );\r\n    `,\r\n      [pobrezaList]\r\n    );\r\n\r\n    return pobreza;\r\n  };\r\n}\r\n","import alasql from \"alasql\";\r\nimport { Layer } from \"leaflet\";\r\nimport { ColorBoxProps } from \"../components/ColorBox/ColorBox\";\r\nimport { PresidentMap } from \"../utils/constants\";\r\nimport { HeatMap } from \"./heatmap\";\r\n\r\nconst presPropMap = {\r\n  cand_1: 0,\r\n  cand_6: 3,\r\n  cand_9: 2,\r\n  cand_12: 1,\r\n};\r\n\r\ntype PresResult = {\r\n  cand_1: number;\r\n  cand_6: number;\r\n  cand_9: number;\r\n  cand_12: number;\r\n  total: number;\r\n};\r\n\r\nexport class PresidentialResultsHeatMap extends HeatMap<PresResult> {\r\n  readonly props: ColorBoxProps[];\r\n\r\n  constructor() {\r\n    super();\r\n    const results = this.loadResults();\r\n\r\n    this.props = [\r\n      {\r\n        title: \"Andrés Arauz\",\r\n        bg: \"#f58634\",\r\n        color: \"black\",\r\n        subtitle: `${((results.cand_1 / results.total) * 100).toFixed(2)}%`,\r\n      },\r\n      {\r\n        title: \"Guillermo Lasso\",\r\n        bg: \"#1a508b\",\r\n        color: \"white\",\r\n        subtitle: `${((results.cand_12 / results.total) * 100).toFixed(2)}%`,\r\n      },\r\n      {\r\n        title: \"Yaku Perez\",\r\n        bg: \"#00af91\",\r\n        color: \"black\",\r\n        subtitle: `${((results.cand_9 / results.total) * 100).toFixed(2)}%`,\r\n      },\r\n      {\r\n        title: \"Xavier Hervas\",\r\n        bg: \"#ffcc29\",\r\n        color: \"black\",\r\n        subtitle: `${((results.cand_6 / results.total) * 100).toFixed(2)}%`,\r\n      },\r\n    ];\r\n  }\r\n\r\n  loadResults(): PresResult {\r\n    const [results] = alasql(\r\n      `\r\n              SELECT SUM(cand_1) cand_1, SUM(cand_6) cand_6, SUM(cand_9) cand_9, SUM(cand_12) cand_12, \r\n              SUM(cand_1 + cand_2 + cand_3 + cand_4 + cand_5 + cand_6 + cand_7 + cand_8 + cand_9 + cand_10 + cand_11 + cand_12 + cand_13 + cand_14 + cand_15 + cand_16) total\r\n              FROM provincia \r\n                JOIN canton ON canton.provinciaId = provincia.id\r\n                JOIN parroquia ON parroquia.cantonId = canton.id\r\n                JOIN zona ON zona.parroquiaId = parroquia.id\r\n                JOIN junta ON junta.zonaId = zona.id\r\n                JOIN res_presidente ON res_presidente.juntaId = junta.id;\r\n            `\r\n    );\r\n\r\n    return results;\r\n  }\r\n\r\n  protected paintFeature = (\r\n    layer: Layer,\r\n    name: string,\r\n    { total, ...results }: PresResult\r\n  ) => {\r\n    const order = Object.entries(results).sort((a, b) => b[1] - a[1]);\r\n\r\n    layer.bindTooltip(`\r\n          <h4><strong>${name}</strong></h4>\r\n          ${order\r\n            .map(\r\n              (entry, index) =>\r\n                `<p>${index + 1}°: ${PresidentMap[entry[0]]}, ${(\r\n                  (entry[1] / total) *\r\n                  100\r\n                ).toFixed(2)}% de votos.</p>`\r\n            )\r\n            .join(\"\")}\r\n        `);\r\n\r\n    //@ts-ignore\r\n    (layer as any).options.fillColor = this.props[presPropMap[order[0][0]]].bg;\r\n  };\r\n\r\n  processProvincias = (id: number) => {\r\n    const [results] = alasql(\r\n      `\r\n            SELECT SUM(cand_1) cand_1, SUM(cand_6) cand_6, SUM(cand_9) cand_9, SUM(cand_12) cand_12, \r\n            SUM(cand_1 + cand_2 + cand_3 + cand_4 + cand_5 + cand_6 + cand_7 + cand_8 + cand_9 + cand_10 + cand_11 + cand_12 + cand_13 + cand_14 + cand_15 + cand_16) total\r\n            FROM provincia \r\n              JOIN canton ON canton.provinciaId = provincia.id\r\n              JOIN parroquia ON parroquia.cantonId = canton.id\r\n              JOIN zona ON zona.parroquiaId = parroquia.id\r\n              JOIN junta ON junta.zonaId = zona.id\r\n              JOIN res_presidente ON res_presidente.juntaId = junta.id\r\n            WHERE provincia.id = ${id}\r\n            GROUP BY provinciaId;\r\n          `\r\n    );\r\n\r\n    return results;\r\n  };\r\n\r\n  processCantones = (id: number) => {\r\n    const [results] = alasql(\r\n      `\r\n              SELECT SUM(cand_1) cand_1, SUM(cand_6) cand_6, SUM(cand_9) cand_9, SUM(cand_12) cand_12, \r\n              SUM(cand_1 + cand_2 + cand_3 + cand_4 + cand_5 + cand_6 + cand_7 + cand_8 + cand_9 + cand_10 + cand_11 + cand_12 + cand_13 + cand_14 + cand_15 + cand_16) total\r\n              FROM canton\r\n                JOIN parroquia ON parroquia.cantonId = canton.id\r\n                JOIN zona ON zona.parroquiaId = parroquia.id\r\n                JOIN junta ON junta.zonaId = zona.id\r\n                JOIN res_presidente ON res_presidente.juntaId = junta.id\r\n              WHERE canton.id = ${id}\r\n              GROUP BY cantonId;\r\n            `\r\n    );\r\n\r\n    return results;\r\n  };\r\n}\r\n","import { Box, Text } from \"@chakra-ui/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { initDb } from \"../../bin\";\r\nimport { ColorGuide, Map, StatsSidebar, Toolbar } from \"../../components\";\r\nimport { HeatMapType } from \"../../enums\";\r\nimport {\r\n  HeatMap,\r\n  PovertyHeatMap,\r\n  PresidentialResultsHeatMap,\r\n} from \"../../heatmaps\";\r\n\r\nexport interface MapPageProps {}\r\n\r\nconst MapPage: React.FC<MapPageProps> = () => {\r\n  const [heatMap, setHeatMap] = useState(HeatMapType.Poverty);\r\n  const [heatMapMap, setHeatMapMap] = useState<Record<HeatMapType, HeatMap>>();\r\n\r\n  useEffect(() => {\r\n    initDb().then(() => {\r\n      const heatMapMap: Record<HeatMapType, HeatMap> = {\r\n        [HeatMapType.Poverty]: new PovertyHeatMap(),\r\n        [HeatMapType.PresidentialResults]: new PresidentialResultsHeatMap(),\r\n      };\r\n      setHeatMapMap(heatMapMap);\r\n    });\r\n  }, []);\r\n\r\n  return heatMapMap ? (\r\n    <>\r\n      <Toolbar heatMapType={heatMap} onHeatMapChange={setHeatMap} />\r\n      <Box flex={1} d=\"flex\">\r\n        <Map heatMap={heatMapMap[heatMap]} heatMapType={heatMap} />\r\n        <StatsSidebar />\r\n      </Box>\r\n      <ColorGuide heatMap={heatMapMap[heatMap]} />\r\n    </>\r\n  ) : (\r\n    <Text>Cargando...</Text>\r\n  );\r\n};\r\n\r\nexport default MapPage;\r\n","import { ChakraProvider, extendTheme } from \"@chakra-ui/react\";\r\nimport { Layout } from \"../../components\";\r\nimport { colors, fonts, styles } from \"../../theme\";\r\nimport { MapPage } from \"../MapPage\";\r\n\r\nconst theme = extendTheme({ colors, fonts, styles });\r\n\r\nfunction App() {\r\n  return (\r\n    <ChakraProvider theme={theme}>\r\n      <Layout>\r\n        <MapPage />\r\n      </Layout>\r\n    </ChakraProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","export const colors = {\r\n  brand: {\r\n    50: \"#edfbe3\",\r\n    100: \"#d4efbf\",\r\n    200: \"#b9e39a\",\r\n    300: \"#9ed873\",\r\n    400: \"#83cc4c\",\r\n    500: \"#69b333\",\r\n    600: \"#518b26\",\r\n    700: \"#3a6319\",\r\n    800: \"#203d0c\",\r\n    900: \"#061600\",\r\n  },\r\n};\r\n","export const fonts = {\r\n  body: \"Open Sans\",\r\n  heading: \"Open Sans\",\r\n  mono: \"Menlo, monospace\",\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./containers\";\nimport \"./index.css\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}